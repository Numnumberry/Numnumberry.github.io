(this.webpackJsonpsos=this.webpackJsonpsos||[]).push([[0],{17:function(e,t,n){e.exports=n(55)},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(15),c=n.n(r),l=n(1),o=n(8),s=n.n(o);n(25),n(27),n(56);s.a.initializeApp({apiKey:"AIzaSyBu4CnVOrfk7iUR-FuE43G5SOtGuWBIKNM",authDomain:"sosdev-8dd29.firebaseapp.com",databaseURL:"https://sosdev-8dd29.firebaseio.com",projectId:"sosdev-8dd29",storageBucket:"sosdev-8dd29.appspot.com",messagingSenderId:"304920388330",appId:"1:304920388330:web:c57e9329a3ac1a2d62ed93",measurementId:"G-6Y9H3ZEFEE"});var u=s.a.auth(),d=s.a.firestore(),m=s.a.storage(),p=Object.freeze({lightGray:"#4D4B4F",gray:"#252426",darkGray:"#1e1e1e",darkerGray:"#151515",darkestGray:"#0f0f0f",white:"white",offWhite:"#8c8c8c",black:"black",red:"#e32b2b"}),g=n(6),f={display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:p.white,fontWeight:500,outline:"none",transition:"all .1s ease-in",boxSizing:"border-box"},h=Object(g.a)(Object(g.a)({},f),{},{backgroundColor:p.lightGray,border:"1px solid "+p.darkerGray,borderRadius:"2px"}),y=Object(g.a)(Object(g.a)({},f),{},{backgroundColor:p.gray,border:"1px solid "+p.darkerGray,borderRadius:"2px"}),E=Object(g.a)(Object(g.a)({},f),{},{backgroundColor:p.red,border:"1px solid "+p.darkerGray,borderRadius:"2px"}),b=function(e){var t=function(e){switch(e){case"primary":return h;case"secondary":return y;case"tertiary":return E;default:return h}}(e.type);return i.a.createElement("div",{onClick:e.onClick,style:Object(g.a)(Object(g.a)({},t),e.style)},e.children)},x={padding:"8px",color:p.white,backgroundColor:p.darkGray,borderRadius:"2px",outline:"none"},v=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)(!1),r=Object(l.a)(n,2),c=r[0],o=r[1];Object(a.useEffect)((function(){e.focusOnMount&&t.current&&t.current.focus()}),[e.focusOnMount]);return i.a.createElement("input",{ref:t,onKeyPress:function(n){"Enter"===n.key&&(t.current&&t.current.blur(),e.onEnterKey&&e.onEnterKey())},value:e.value,onFocus:function(){return o(!0)},onBlur:function(){return o(!1)},maxLength:e.maxLength,onChange:function(t){return e.onChange(t.target.value)},type:e.password?"password":"text",spellCheck:!1,style:Object(g.a)(Object(g.a)({},x),{},{width:e.width,border:"1px solid ".concat(c?p.offWhite:p.lightGray)})})},w=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],c=n[1];return i.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:"16px",backgroundColor:p.darkestGray}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},i.a.createElement("img",{width:e.imageWidth,height:e.imageHeight,alt:"uploaded",src:e.imageSource}),i.a.createElement(v,{focusOnMount:!0,value:r,onChange:function(t){c(t),e.passLabel(t)},width:e.textFieldWidth,maxLength:50})))},j=n(16),O=n.n(j),k=(n(53),function(e){return i.a.createElement("div",{style:{marginBottom:"-4px"}},i.a.createElement(O.a,{type:e.type,color:e.color,width:e.width,height:e.height}))}),C={display:"flex",alignItems:"center",justifyContent:"center",width:"18px",height:"18px",backgroundColor:p.white,borderRadius:"2px",cursor:"pointer"},I=function(e){return i.a.createElement("div",{style:C},e.checked?i.a.createElement("div",{style:{width:"14px",height:"14px",backgroundColor:p.red}}):null)},S={color:"white",display:"flex",alignItems:"center",justifyContent:"space-between",position:"fixed",backgroundColor:p.darkGray,height:"".concat(50,"px"),width:"100%"},L=function(e){return i.a.createElement("div",{style:S},""!==e.loggedInUser.id&&e.loggedInUser.admin?i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(b,{onClick:function(){return e.setPage("admin-claims")},type:"admin-claims"===e.page?"secondary":"primary",style:{width:"72px",height:"32px",marginLeft:"16px"}},i.a.createElement("span",null,"Claims")),i.a.createElement(b,{onClick:function(){return e.setPage("admin-users")},type:"admin-users"===e.page?"secondary":"primary",style:{width:"66px",height:"32px",marginLeft:"8px"}},i.a.createElement("span",null,"Users")),i.a.createElement(b,{onClick:function(){return e.setPage("claim-submit")},type:"claim-submit"===e.page?"secondary":"primary",style:{width:"70px",height:"32px",marginLeft:"8px"}},i.a.createElement("span",null,"Submit"))):i.a.createElement("div",{style:{height:"32px"}}),""!==e.loggedInUser.id?i.a.createElement(b,{onClick:function(){u.signOut(),e.setLoggedInUser({id:"",admin:!1,email:"",firstName:"",lastName:""})},type:"tertiary",style:{width:"70px",height:"32px",marginRight:"16px"}},i.a.createElement("span",null,"Logout")):null)},N=n(5),U=n(4),F="admin",R="firstName",P="lastName",W="email",G="firstName",B="lastName",T="admin",D="ownerId",A="ownerFirstName",M="ownerLastName",z="imageInfos",_="pdfInfos",H="timestamp",K=function(e,t){var n=e.imageInfos.map((function(e){return fetch(e.downloadUrl)})),a=e.pdfInfos.map((function(e){return fetch(e.downloadUrl)}));Promise.all(n.concat(a)).then((function(n){Promise.all(n.map((function(e){return e.blob()}))).then((function(n){var a=e.imageInfos.map((function(e){return e.fileName})).concat(e.pdfInfos.map((function(e){return e.fileName})));n.forEach((function(e,i){var r=URL.createObjectURL(e),c=document.createElement("a");c.href=r,c.download=a[i],setTimeout((function(){c.click(),n.length===i+1&&t()}),400*i)}))}))}))},X=window.innerWidth-32,Y=window.innerHeight/2,J={display:"flex",position:"fixed",top:"0px",bottom:"0px",width:"100%",height:"100%",overflow:"scroll"},V={zIndex:0,opacity:.9,backgroundColor:p.darkestGray,position:"fixed",width:"100%",height:"100%"},Z={zIndex:1,backgroundColor:p.gray,margin:"auto",width:X,maxWidth:"500px"},$={display:"flex",alignItems:"center",justifyContent:"space-between",color:p.white,paddingBottom:"8px"},q=function(e){var t=Object(a.useRef)([]),n=Object(a.useState)([]),r=Object(l.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)([]),u=Object(l.a)(s,2),g=u[0],f=u[1],h=Object(a.useState)([]),y=Object(l.a)(h,2),E=y[0],x=y[1],v=Object(a.useState)(!1),j=Object(l.a)(v,2),O=j[0],C=j[1],I=Object(a.useState)(!1),S=Object(l.a)(I,2),L=S[0],F=S[1],R=Object(a.useState)(""),P=Object(l.a)(R,2),W=P[0],G=P[1],B=Object(a.useState)([]),T=Object(l.a)(B,2),K=T[0],q=T[1],Q=Object(a.useState)([]),ee=Object(l.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(0),ie=Object(l.a)(ae,2),re=ie[0],ce=ie[1],le=Object(a.useState)(""),oe=Object(l.a)(le,2),se=oe[0],ue=oe[1],de=Object(a.useState)(""),me=Object(l.a)(de,2),pe=me[0],ge=me[1],fe=Object(a.useState)(""),he=Object(l.a)(fe,2),ye=he[0],Ee=he[1],be=Object(a.useState)(""),xe=Object(l.a)(be,2),ve=xe[0],we=xe[1],je=Object(a.useState)(0),Oe=Object(l.a)(je,2),ke=Oe[0],Ce=Oe[1],Ie=Object(a.useState)(0),Se=Object(l.a)(Ie,2),Le=Se[0],Ne=Se[1],Ue=function(e){var t=new Image;t.onload=function(){var e=function(e,t){var n=e,a=t;if(n>X){var i=X/n;n*=i,a*=i}if(a>Y){var r=Y/a;n*=r,a*=r}return[n,a]}(t.naturalWidth,t.naturalHeight),n=Object(l.a)(e,2),a=n[0],i=n[1];t.width=a,t.height=i,f([].concat(Object(N.a)(g),[""])),o([].concat(Object(N.a)(c),[{id:c.length,imageElement:t,textFieldWidth:"".concat(X-18,"px")}]))},t.src=URL.createObjectURL(e)},Fe=function(e){e.target.files&&e.target.files.length&&Ue(e.target.files[0])},Re=function(e,t){e?(ge("Done"),Ee("Processing")):(ge("Failed"),G(t),F(!1))},Pe=function(e,t){e?(Ee("Done"),we("Processing")):(Ee("Failed"),G(t),F(!1))},We=function(e,t){e?(we("Done"),F(!1)):(we("Failed"),G(t),F(!1))},Ge=function(){t.current=[],G(""),ce(0),ue(""),ge(""),Ee(""),we(""),Ce(0),Ne(0)},Be=function(){Ge(),o([]),f([]),x([]),C(!1),q([]),ne([])},Te=function(){q([]),ne([]),G(""),C(!1)},De=function(){Ge(),ue("Processing"),F(!0);var n=document.createElement("canvas"),a=n.getContext("2d");a?function e(n,a,i,r,l){if(t.current.length===c.length-K.length)l();else if(K.includes(a))e(c[a+1],a+1,i,r,l);else{var o=n.imageElement.naturalWidth,s=n.imageElement.naturalHeight,u=.08*n.imageElement.naturalWidth;i.width=o,i.height=s+u,r.drawImage(n.imageElement,0,0,o,s),r.fillStyle=p.white,r.fillRect(0,s,o,u),r.font="".concat(u,"px Arial"),r.fillStyle=p.black,r.fillText(g[a],0,s+u-.22*u,o),i.toBlob((function(n){n?(t.current.push(n),ce(t.current.length),e(c[a+1],a+1,i,r,l)):(ue("Failed"),G("Blob creation failed."),F(!1))}),"image/jpeg",.6)}}(c[0],0,n,a,(function(){ue("Done"),ge("Processing"),function(e,t,n,a,i,r,c,l,o){var s=new Date,u="".concat(e.id,"_").concat(s.getTime()),p=0,g=0,f=[],h=[],y=[],E=[],b=[],x=[];t.forEach((function(t,a){var i="users/".concat(e.id,"/claims/").concat(u,"/").concat(a+1,"_").concat(n[a],".jpeg");f.push("".concat(a+1,"_").concat(n[a],".jpeg")),y.push(i),b.push(m.ref(i).put(t))})),a.forEach((function(n,a){var i="users/".concat(e.id,"/claims/").concat(u,"/").concat(t.length+a+1,"_").concat(n.name);h.push("".concat(t.length+a+1,"_").concat(n.name)),E.push(i),x.push(m.ref(i).put(n))}));var v=b.map((function(e){return e.then((function(){return i(++p),e.snapshot}))})),w=x.map((function(e){return e.then((function(){return r(++g),e.snapshot}))}));Promise.all(v.concat(w)).then((function(n){c(!0,""),Promise.all(n.map((function(e){return e.ref.getDownloadURL()}))).then((function(n){var a;l(!0,"");var i=n.slice(0,t.length),r=n.slice(t.length),c=[],m=[];f.forEach((function(e,t){c.push({fileName:e,downloadUrl:i[t],storagePath:y[t]})})),h.forEach((function(e,t){m.push({fileName:e,downloadUrl:r[t],storagePath:E[t]})})),d.collection("claims").doc(u).set((a={},Object(U.a)(a,D,e.id),Object(U.a)(a,A,e.firstName),Object(U.a)(a,M,e.lastName),Object(U.a)(a,z,c),Object(U.a)(a,_,m),Object(U.a)(a,H,s),a)).then((function(){o(!0,"")})).catch((function(e){o(!1,e.message)}))})).catch((function(e){l(!1,e.message)}))})).catch((function(e){c(!1,e.message)}))}(e.loggedInUser,t.current,g.filter((function(e,t){return!K.includes(t)})),E.filter((function(e,t){return!te.includes(t)})),(function(e){return Ce(e)}),(function(e){return Ne(e)}),Re,Pe,We)})):(ue("Failed"),G("Canvas context failed."),F(!1))},Ae=function(e,t,n){return i.a.createElement("div",{style:$},i.a.createElement("div",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},"image"===e?"".concat(n+1,"_").concat(t,".jpeg"):t),i.a.createElement(b,{onClick:function(){return function(e,t){"image"===e?q([].concat(Object(N.a)(K),[t])):ne([].concat(Object(N.a)(te),[t]))}(e,n)},type:"tertiary",style:{width:"32px",minWidth:"32px",height:"32px"}},i.a.createElement("span",{style:{fontSize:"22px"}},"X")))},Me="Done"===se&&"Done"===pe&&"Done"===ye&&"Done"===ve,ze=c.length+E.length-(K.length+te.length);return i.a.createElement("div",null,O?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:J},i.a.createElement("div",{style:V}),i.a.createElement("div",{style:Z},i.a.createElement("div",{style:{margin:"16px"}},i.a.createElement("div",{style:{backgroundColor:p.darkGray,width:"".concat(Math.min(X-48,452),"px"),padding:"8px 8px 0 8px"}},L||Me||W?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:$},i.a.createElement("div",null,"Generating Images ".concat(re,"/").concat(c.length-K.length)),i.a.createElement("div",null,se)),i.a.createElement("div",{style:$},i.a.createElement("div",null,"Uploading Files ".concat(ke+Le,"/").concat(ze)),i.a.createElement("div",null,pe)),i.a.createElement("div",{style:$},i.a.createElement("div",null,"Creating URLs"),i.a.createElement("div",null,ye)),i.a.createElement("div",{style:$},i.a.createElement("div",null,"Creating Document"),i.a.createElement("div",null,ve))):i.a.createElement(i.a.Fragment,null,g.map((function(e,t){return K.includes(t)?null:i.a.createElement(i.a.Fragment,{key:t},Ae("image",e,t))})),E.map((function(e,t){return te.includes(t)?null:i.a.createElement(i.a.Fragment,{key:t},Ae("pdf",e.name,t))})))),W?i.a.createElement("div",{style:{marginTop:"16px"}},i.a.createElement("span",{style:{color:p.red}},W)):null,i.a.createElement("div",{style:{display:"flex",justifyContent:"center",height:"48px",marginTop:"16px"}},L?i.a.createElement(k,{type:"ThreeDots",color:p.lightGray,width:200,height:48}):i.a.createElement(i.a.Fragment,null,Me?i.a.createElement(b,{onClick:Be,type:"tertiary",style:{flex:1,height:"100%"}},i.a.createElement("span",null,"FINISH")):i.a.createElement(b,{onClick:Te,type:"primary",style:{flex:1,height:"100%"}},i.a.createElement("span",null,"Cancel")),Me||K.length===c.length&&te.length===E.length?null:i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{width:"16px",height:"100%"}}),i.a.createElement(b,{onClick:De,type:"tertiary",style:{flex:1,height:"100%"}},i.a.createElement("span",null,W?"RETRY":"SUBMIT CLAIM"))))))))):null,i.a.createElement("div",{style:{margin:"16px"}},c.map((function(e){return i.a.createElement(w,{key:e.id,imageSource:e.imageElement.src,imageWidth:"".concat(e.imageElement.width,"px"),imageHeight:"".concat(e.imageElement.height,"px"),textFieldWidth:e.textFieldWidth,passLabel:function(t){return function(e,t){var n=Object(N.a)(g);n[e]=t,f(n)}(e.id,t)}})})),i.a.createElement("div",{style:{display:"flex",height:"64px",margin:"16px 0"}},i.a.createElement("input",{type:"file",accept:"image/jpeg",id:"choosePhoto",onChange:Fe,style:{display:"none"}}),i.a.createElement("label",{htmlFor:"choosePhoto",style:{color:p.white,flex:1}},i.a.createElement(b,{type:"secondary",style:{height:"100%"}},i.a.createElement("span",null,"Choose Photo"))),i.a.createElement("div",{style:{width:"16px",height:"100%"}}),i.a.createElement("input",{type:"file",accept:"image/*",capture:"environment",id:"takePhoto",onChange:Fe,style:{display:"none"}}),i.a.createElement("label",{htmlFor:"takePhoto",style:{color:p.white,flex:1}},i.a.createElement(b,{type:"primary",style:{height:"100%"}},i.a.createElement("span",null,"Take Photo")))),E.map((function(e,t){return i.a.createElement("div",{key:t,style:{color:p.red,display:"flex",justifyContent:"center",marginBottom:"8px",width:X}},i.a.createElement("span",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},e.name))})),i.a.createElement("div",{style:{height:"64px",margin:"16px 0"}},i.a.createElement("input",{type:"file",accept:"application/pdf",id:"choosePdf",onChange:function(e){e.target.files&&e.target.files.length&&x([].concat(Object(N.a)(E),[e.target.files[0]]))},style:{display:"none"}}),i.a.createElement("label",{htmlFor:"choosePdf",style:{color:p.white}},i.a.createElement(b,{type:"primary",style:{height:"100%"}},i.a.createElement("span",null,"Choose PDF")))),0===g.length&&0===E.length?null:i.a.createElement(b,{onClick:function(){return C(!0)},type:"tertiary",style:{height:"64px"}},i.a.createElement("span",null,"SUBMIT CLAIM"))))},Q=function(e){var t=Object(a.useState)(e),n=Object(l.a)(t,2),i=n[0],r=n[1];return[i,{value:i,onChange:function(e){r(e)}},function(){r(e)}]},ee=function(e,t){d.collection("users").doc(e).get().then((function(n){var a=n.data();t(a?{id:e,email:a[W],firstName:a[G],lastName:a[B],admin:a[T]}:null)})).catch((function(){t(null)}))},te=function(e,t){var n;d.collection("users").doc(e.id).set((n={},Object(U.a)(n,W,e.email),Object(U.a)(n,G,e.firstName),Object(U.a)(n,B,e.lastName),Object(U.a)(n,T,e.admin),n)).then((function(){t(!0)})).catch((function(){t(!1)}))},ne={backgroundColor:p.darkerGray,display:"flex",position:"absolute",top:"50px",bottom:"0px",width:"100%",height:"auto"},ae={backgroundColor:p.gray,margin:"auto"},ie={color:p.white,marginBottom:"8px"},re=function(e){var t=Q(""),n=Object(l.a)(t,2),r=n[0],c=n[1],o=Q(""),s=Object(l.a)(o,2),m=s[0],g=s[1],f=Q(""),h=Object(l.a)(f,2),y=h[0],E=h[1],x=Object(a.useState)(""),w=Object(l.a)(x,2),j=w[0],O=w[1],C=Object(a.useState)(!1),I=Object(l.a)(C,2),S=I[0],L=I[1],N=Object(a.useState)(!1),U=Object(l.a)(N,2),W=U[0],G=U[1],B=function(){var t,n,a;O(""),m===y?(L(!0),t=r,n=m,a=function(t,n,a){t&&a?e.setLoggedInUser(a):(L(!1),O(n))},d.collection("future_users").doc(t).get().then((function(e){var i=e.data();e.exists&&i?u.createUserWithEmailAndPassword(t,n).then((function(e){if(e.user){var n={id:e.user.uid,email:t,firstName:i[R],lastName:i[P],admin:i[F]};te(n,(function(e){e?(d.collection("future_users").doc(t).delete(),a(!0,"",n)):a(!1,"Failed to create user document.")}))}})).catch((function(e){a(!1,e.message)})):a(!1,"This email is not allowed to register.")})).catch((function(e){a(!1,e.message)}))):O("Passwords do not match.")},T=function(){var t,n,a;O(""),L(!0),t=r,n=m,a=function(t,n,a){t&&a?e.setLoggedInUser(a):(L(!1),O(n))},u.signInWithEmailAndPassword(t,n).then((function(e){e.user&&ee(e.user.uid,(function(e){e?a(!0,"",e):a(!1,"User document does not exist.")}))})).catch((function(e){a(!1,e.message)}))};return i.a.createElement("div",{style:ne},i.a.createElement("div",{style:ae},i.a.createElement("div",{style:{margin:"16px"}},i.a.createElement("div",{style:{marginBottom:"16px"}},i.a.createElement("div",{style:ie},i.a.createElement("span",null,"Email:")),i.a.createElement(v,Object.assign({},c,{focusOnMount:!0,width:"270px",maxLength:50,onEnterKey:W?B:T}))),i.a.createElement("div",{style:{marginBottom:"16px"}},i.a.createElement("div",{style:ie},i.a.createElement("span",null,"Password:")),i.a.createElement(v,Object.assign({},g,{width:"270px",maxLength:50,onEnterKey:W?B:T,password:!0}))),W?i.a.createElement("div",{style:{marginBottom:"16px"}},i.a.createElement("div",{style:ie},i.a.createElement("span",null,"Repeat Password:")),i.a.createElement(v,Object.assign({},E,{width:"270px",maxLength:50,onEnterKey:W?B:T,password:!0}))):null,i.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},S?i.a.createElement(k,{type:"ThreeDots",color:p.lightGray,width:100,height:32}):i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(b,{onClick:function(){G(!W)},type:"secondary",style:{width:"172px",height:"48px",marginRight:"16px"}},W?i.a.createElement("span",null,"Switch to Login"):i.a.createElement("span",null,"Switch to Register")),i.a.createElement(b,{onClick:W?B:T,type:"primary",style:{width:"100px",height:"48px"}},W?i.a.createElement("span",null,"REGISTER"):i.a.createElement("span",null,"LOG IN")))),j?i.a.createElement("div",{style:{color:p.red,marginTop:"16px",width:"270px"}},i.a.createElement("span",null,j)):null)))},ce={color:"white",display:"flex",justifyContent:"center"},le=function(e){var t=window.location.href,n=t.lastIndexOf("="),r=-1===n?"":t.slice(n+1),c=Object(a.useState)([]),o=Object(l.a)(c,2),s=o[0],u=o[1],g=Object(a.useState)(!0),f=Object(l.a)(g,2),h=f[0],y=f[1],E=Object(a.useState)([]),x=Object(l.a)(E,2),v=x[0],w=x[1],j=Object(a.useState)([]),O=Object(l.a)(j,2),C=O[0],I=O[1],S=Object(a.useState)([]),L=Object(l.a)(S,2),U=L[0],F=L[1];Object(a.useEffect)((function(){var e,t;r?(e=r,t=function(e){e&&(u([e]),I([e.id]),K(e,(function(){return I([])}))),y(!1)},d.collection("claims").doc(e).get().then((function(e){var n=e.data();e.exists&&n?t({id:e.id,ownerId:n[D],ownerFirstName:n[A],ownerLastName:n[M],imageInfos:n[z],pdfInfos:n[_],timestamp:n[H]}):t(null)})).catch((function(e){console.log(e),t(null)}))):function(e){d.collection("claims").orderBy(H,"desc").get().then((function(t){var n=[];t.forEach((function(e){var t=e.data();n.push({id:e.id,ownerId:t[D],ownerFirstName:t[A],ownerLastName:t[M],imageInfos:t[z],pdfInfos:t[_],timestamp:t[H]})})),e(n)})).catch((function(t){console.log(t),e([])}))}((function(e){u(e),y(!1)}))}),[r]);return h?i.a.createElement(me,null):s.length&&U.length!==s.length?i.a.createElement("div",{style:ce},i.a.createElement("div",null,v.length&&!C.length?i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"16px",backgroundColor:p.gray,padding:"9px"}},i.a.createElement("div",{style:{marginLeft:"7px"}},"Delete these ".concat(v.length," claim(s)?")),i.a.createElement(b,{onClick:function(){I(v.map((function(e){return e.id}))),function(e,t){var n=[],a=[];e.forEach((function(e){a.push(d.collection("claims").doc(e.id).delete()),e.imageInfos.forEach((function(e){n.push(m.ref(e.storagePath).delete())})),e.pdfInfos.forEach((function(e){n.push(m.ref(e.storagePath).delete())}))})),Promise.all(n.concat(a)).then((function(){t()}))}(v,(function(){F(U.concat(v.map((function(e){return e.id})))),w([]),I([])}))},type:"tertiary",style:{width:"90px",minWidth:"90px",height:"32px",marginRight:"7px"}},i.a.createElement("span",null,"CONFIRM"))):null,s.filter((function(e){return!U.includes(e.id)})).map((function(e){return i.a.createElement("div",{key:e.id,style:{display:"flex",alignItems:"center",marginTop:"16px"}},i.a.createElement("div",{onClick:C.length?function(){return null}:function(){return I([(t=e).id]),void K(t,(function(){return I([])}));var t},style:{cursor:C.length?void 0:"pointer",display:"flex",padding:"16px",backgroundColor:v.map((function(e){return e.id})).includes(e.id)?p.red:p.gray}},i.a.createElement("div",{style:{width:"160px",marginRight:"16px"}},function(e){var t=e.toDate(),n=t.getHours(),a=t.getMinutes(),i=a.toString(),r="AM";return 0===n&&(n=12),n>12&&(n-=12,r="PM"),a<10&&(i="0"+a),"".concat(t.getMonth()+1,"/").concat(t.getDate(),"/").concat(t.getFullYear()," ").concat(n,":").concat(i," ").concat(r)}(e.timestamp)),i.a.createElement("div",{style:{width:window.innerWidth<658?"72px":"180px",marginRight:window.innerWidth<658?void 0:"16px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},"".concat(e.ownerLastName,", ").concat(e.ownerFirstName)),window.innerWidth<658?null:i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{width:"84px",marginRight:"16px"}},"".concat(e.imageInfos.length," images")),i.a.createElement("div",{style:{width:"114px"}},"".concat(e.pdfInfos.length," documents")))),C.includes(e.id)?i.a.createElement("div",{style:{marginLeft:"8px"}},i.a.createElement(k,{type:"Oval",color:p.lightGray,width:32,height:32})):i.a.createElement(b,{onClick:function(){return t=e,void(v.map((function(e){return e.id})).includes(t.id)?w(v.filter((function(e){return e.id!==t.id}))):w([].concat(Object(N.a)(v),[t])));var t},type:"tertiary",style:{width:"32px",minWidth:"32px",height:"32px",marginLeft:"8px"}},i.a.createElement("span",{style:{fontSize:"22px"}},"X")))})))):i.a.createElement("div",{style:ce},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"16px"}},i.a.createElement("div",null,"NO RESULTS")))},oe={color:"white",display:"flex",justifyContent:"center"},se={color:p.white,marginBottom:"8px"},ue=function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!0),s=Object(l.a)(o,2),u=s[0],m=s[1],g=Object(a.useState)([]),f=Object(l.a)(g,2),h=f[0],y=f[1],E=Object(a.useState)([]),x=Object(l.a)(E,2),w=x[0],j=x[1],O=Object(a.useState)([]),C=Object(l.a)(O,2),S=C[0],L=C[1],D=Object(a.useState)(!1),A=Object(l.a)(D,2),M=A[0],z=A[1],_=Q(""),H=Object(l.a)(_,2),K=H[0],X=H[1],Y=Q(""),J=Object(l.a)(Y,2),V=J[0],Z=J[1],$=Q(""),q=Object(l.a)($,2),ee=q[0],ne=q[1],ae=Object(a.useState)(!1),ie=Object(l.a)(ae,2),re=ie[0],ce=ie[1],le=Object(a.useState)(!1),ue=Object(l.a)(le,2),de=ue[0],pe=ue[1];Object(a.useEffect)((function(){var e;e=function(e){c(e),m(!1)},d.collection("users").orderBy(B,"asc").get().then((function(t){var n=[];t.forEach((function(e){var t=e.data();n.push({id:e.id,email:t[W],firstName:t[G],lastName:t[B],admin:t[T]})})),e(n)})).catch((function(){e([])}))}),[]);var ge={width:window.innerWidth<418?"70px":"120px",marginRight:"16px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"};if(u)return i.a.createElement(me,null);return i.a.createElement("div",{style:oe},i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%",backgroundColor:p.gray,marginTop:"16px"}},M?i.a.createElement("div",{style:{padding:"16px"}},i.a.createElement("div",{style:{marginBottom:"16px"}},i.a.createElement("div",{style:se},i.a.createElement("span",null,"Email:")),i.a.createElement(v,Object.assign({},X,{width:"270px",maxLength:50}))),i.a.createElement("div",{style:{marginBottom:"16px"}},i.a.createElement("div",{style:se},i.a.createElement("span",null,"First Name:")),i.a.createElement(v,Object.assign({},Z,{width:"270px",maxLength:50}))),i.a.createElement("div",{style:{marginBottom:"16px"}},i.a.createElement("div",{style:se},i.a.createElement("span",null,"Last Name:")),i.a.createElement(v,Object.assign({},ne,{width:"270px",maxLength:50}))),i.a.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"}},i.a.createElement("div",{onClick:function(){return ce(!re)}},i.a.createElement(I,{checked:re})),i.a.createElement("div",{style:{marginLeft:"8px"}},i.a.createElement("span",null,"Allow Admin Access"))),i.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},de?i.a.createElement(k,{type:"ThreeDots",color:p.lightGray,width:200,height:48}):i.a.createElement(b,{onClick:function(){pe(!0),function(e,t){var n;d.collection("future_users").doc(e.email).set((n={},Object(U.a)(n,F,e.admin),Object(U.a)(n,R,e.firstName),Object(U.a)(n,P,e.lastName),n)).then((function(){t()}))}({email:K,admin:re,firstName:V,lastName:ee},(function(){pe(!1),z(!1)}))},type:"tertiary",style:{width:"170px",height:"48px"}},i.a.createElement("span",null,"Add User To System")))):i.a.createElement(b,{onClick:function(){return z(!0)},type:"primary",style:{padding:"16px",width:"100%"}},i.a.createElement("span",null,"Add New User"))),h.length?i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"16px",backgroundColor:p.gray,padding:"9px"}},i.a.createElement("div",{style:{marginLeft:"7px"}},"Delete these ".concat(h.length," user(s)?")),i.a.createElement(b,{onClick:function(){L(Object(N.a)(h)),function(e,t){var n=[];e.forEach((function(e){n.push(d.collection("users").doc(e).delete())})),Promise.all(n).then((function(){t()}))}(h,(function(){j(w.concat(h)),y([]),L([])}))},type:"tertiary",style:{width:"90px",minWidth:"90px",height:"32px",marginRight:"7px"}},i.a.createElement("span",null,"CONFIRM"))):null,r.filter((function(e){return!w.includes(e.id)})).map((function(t){return i.a.createElement("div",{key:t.id,style:{display:"flex",alignItems:"center",marginTop:"16px"}},i.a.createElement("div",{style:{display:"flex",padding:"16px",backgroundColor:h.includes(t.id)?p.red:p.gray}},i.a.createElement("div",{style:ge},t.lastName),i.a.createElement("div",{style:ge},t.firstName),i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement("div",{onClick:function(){return function(t,n){if(e.loggedInUser.id!==t.id){var a=Object(N.a)(r),i=a.findIndex((function(e){return e.id===t.id}));a[i].admin=n,c(a),te(a[i],(function(e){e||(a[i].admin=!n,c(Object(N.a)(a)))}))}}(t,!t.admin)}},i.a.createElement(I,{checked:t.admin})),i.a.createElement("div",{style:{marginLeft:"8px"}},"Admin"))),S.includes(t.id)?i.a.createElement("div",{style:{marginLeft:"8px"}},i.a.createElement(k,{type:"Oval",color:p.lightGray,width:32,height:32})):i.a.createElement(b,{onClick:e.loggedInUser.id===t.id?function(){return null}:function(){return e=t.id,void(h.includes(e)?y(h.filter((function(t){return t!==e}))):y([].concat(Object(N.a)(h),[e])));var e},type:"tertiary",style:{width:"32px",minWidth:"32px",height:"32px",marginLeft:"8px"}},i.a.createElement("span",{style:{fontSize:"22px"}},"X")))}))))},de={backgroundColor:p.darkerGray,display:"flex",position:"absolute",top:"50px",bottom:"0px",width:"100%",height:"auto"},me=function(){return i.a.createElement("div",{style:de},i.a.createElement("div",{style:{margin:"auto"}},i.a.createElement(k,{type:"Oval",color:p.gray,width:300,height:300})))},pe={paddingTop:"".concat(50,"px"),backgroundColor:p.darkerGray},ge=function(e){return i.a.createElement("div",{style:pe},function(){switch(e.page){case"credential":return i.a.createElement(re,{setLoggedInUser:e.setLoggedInUser});case"claim-submit":return i.a.createElement(q,{loggedInUser:e.loggedInUser});case"admin-claims":return i.a.createElement(le,null);case"admin-users":return i.a.createElement(ue,{loggedInUser:e.loggedInUser});case"loading":return i.a.createElement(me,null)}}())},fe=function(){var e=Object(a.useRef)(!1),t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)("loading"),s=Object(l.a)(o,2),d=s[0],m=s[1],p=Object(a.useState)({id:"",admin:!1,email:"",firstName:"",lastName:""}),g=Object(l.a)(p,2),f=g[0],h=g[1];return Object(a.useEffect)((function(){u.onAuthStateChanged((function(t){e.current||(e.current=!0,t?(console.log("auto fetching user doc"),ee(t.uid,(function(e){e&&h(e),c(!0)}))):(console.log("no signed in user"),c(!0)))}))}),[]),Object(a.useEffect)((function(){r&&(""===f.id?m("credential"):f.admin?m("admin-claims"):m("claim-submit"))}),[r,f]),i.a.createElement(i.a.Fragment,null,i.a.createElement(L,{page:d,setPage:function(e){return m(e)},loggedInUser:f,setLoggedInUser:function(e){return h(e)}}),i.a.createElement(ge,{page:d,loggedInUser:f,setLoggedInUser:function(e){return h(e)}}))};n(54);var he=function(){return i.a.createElement(fe,null)},ye=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ee(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(he,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ye?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ee(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ee(t,e)}))}}()}},[[17,1,2]]]);
//# sourceMappingURL=main.679fb326.chunk.js.map